from aiogram import Router, F
from aiogram.types import CallbackQuery, Message
from aiogram.filters import Command, CommandStart
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton


router_users = Router()

# –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∫—Ä–∏–Ω–æ–≤ –æ—Ç –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user_screenshots = {}


@router_users.message(CommandStart())
async def start(message: Message):
    # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Å–∫—Ä–∏–Ω–æ–≤ –ø—Ä–∏ /start
    user_screenshots[message.from_user.id] = 0
    await message.answer("–ü—Ä–∏–≤–µ—Ç–∏–∫, —è –º–æ–≥—É –ø–æ–¥–∞—Ä–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫ –∑–∞ 400 ‚≠êÔ∏è, –æ—Å—Ç–∞–ª–æ—Å—å 68 —à—Ç—É—á–µ–∫ ‚úåÔ∏è–ù–æ –µ—Å—Ç—å –∑–∞–¥–∞–Ω–∏–µ")
    await message.answer('''<b>1. –õ–∞–π–∫–Ω–∏ –∏ –Ω–∞–ø–∏—à–∏ "—Å–ø–∞—Å–∏–±–æ" –ø–æ–¥ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º —Å –∫–æ—Ç–æ—Ä–æ–≥–æ —É–∑–Ω–∞–ª–∏ –æ–±–æ –º–Ω–µ!</b> - —Ç–æ–ª—å–∫–æ –Ω–µ –∑–∞–±—É–¥—å!‚ö°Ô∏è

<b>2. –ù–∞–ø–∏—à–∏ –ø–æ–¥ 10 –ª—é–±—ã—Ö –≤–∏–¥–µ–æ —ç—Ç–æ—Ç —Ç–µ–∫—Å—Çüëá</b> 

<code>–∫–∞–ø–µ—Ü @–ù–ê–ó–í–ê–ù–ò–ï–ë–û–¢–ê –≤—Å–µ–º –ø–æ –ø–æ–¥–∞—Ä–∫—É –¥–∞—Ä–∏—Çüòå</code>

<b>‚ÄºÔ∏è–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –õ–ê–ô–ö–ù–ò –í–°–ï –°–í–û–ò –ö–û–ú–ú–ï–ù–¢–´‚ÄºÔ∏è</b>

–ö–æ–≥–¥–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–æ –Ω–µ –∑–∞–±—É–¥—å —Å–∫–∏–Ω—É—Ç—å —Å–∫—Ä–∏–Ω—ã!!!''', parse_mode='HTML')


@router_users.message(F.photo)
async def handle_screenshots(message: Message):
    user_id = message.from_user.id
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—á–µ—Ç—á–∏–∫ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–æ–≤—ã–π
    if user_id not in user_screenshots:
        user_screenshots[user_id] = 0
    
    # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Å–∫—Ä–∏–Ω–æ–≤
    user_screenshots[user_id] += 1
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∫—Ä–∏–Ω–æ–≤
    if user_screenshots[user_id] < 10:
        await message.answer(f"–ü–æ–ª—É—á–µ–Ω–æ —Å–∫—Ä–∏–Ω–æ–≤: {user_screenshots[user_id]}/10")
    elif user_screenshots[user_id] == 10:
        await message.answer("<b>3. –ò –ø–æ—Å–ª–µ–¥–Ω–µ–µ, –ø–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –í—Å–µ—Ö —Å–ø–æ–Ω—Å–æ—Ä–æ–≤, –∞ —Ç–æ —É –º–µ–Ω—è –Ω–µ –±—É–¥–µ—Ç –¥–µ–Ω–µ–≥ –Ω–∞ —Ç–≤–æ–π –ø–æ–¥–∞—Ä–æ–∫ üí∞</b> \n\n–£ —Ç–µ–±—è –µ—Å—Ç—å 15 —á–∞—Å–æ–≤!!! –ø–æ—Å–ª–µ —á–µ–≥–æ —è –Ω–∞—á–Ω—É –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏ –¥–∞—Ä–∏—Ç—å. üéÅ", parse_mode='HTML')
        await message.answer(
            "–í–æ—Ç —Ç—É—Ç —Å–ø–æ–Ω—Å–æ—Ä—ã -> @–ù–ê–ó–í–ê–ù–ò–ï–ë–û–¢–ê ‚ù§Ô∏è\n\n"
            "–î–æ–±–∞–≤—å –∏—Ö –≤ –∞—Ä—Ö–∏–≤ –∏ –≤—ã–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫, —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞–ª–∏!\n\n"
            "<b>–í–µ—Ä–Ω–∏—Å—å –∏ –Ω–∞–ø–∏—à–∏ –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–æ!! ‚úÖ –°–∫—Ä–∏–Ω—ã –Ω–µ –Ω–∞–¥–æ, —è —Å–∞–º —É–≤–∏–∂—É –∫–æ–≥–¥–∞ –±—É–¥—É –ø—Ä–æ–≤–µ—Ä—è—Ç—å</b>\n\n"
            "<b>‚ÄºÔ∏è–°—Ä–µ–¥–∏ —Ç–µ—Ö –∫—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç —É—Å–ª–æ–≤–∏—è —è —Å–µ–≥–æ–¥–Ω—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑—ã–≥—Ä–∞—é 15 –ø—Ä–µ–º–æ–∫ –Ω–∞ –≥–æ–¥</b>", parse_mode='HTML'
        )
